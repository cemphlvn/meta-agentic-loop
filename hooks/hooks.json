{
  "SessionStart": [
    {
      "matcher": "*",
      "hooks": [
        {
          "type": "command",
          "command": "bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/session-start.sh",
          "timeout": 10,
          "description": "Load state and scoped remembrance"
        },
        {
          "type": "command",
          "command": "bash ${CLAUDE_PLUGIN_ROOT}/skills/playground/scripts/playground-context.sh",
          "timeout": 5,
          "description": "Inject playground higher-order context"
        },
        {
          "type": "command",
          "command": "cat ${CLAUDE_PLUGIN_ROOT}/skills/advanced-techniques/SKILL.md",
          "timeout": 5,
          "description": "Auto-load advanced techniques index"
        },
        {
          "type": "command",
          "command": "echo '--- WHEREDUE Summary ---' && grep -A2 'status: pending' ${CLAUDE_PROJECT_DIR}/.claude/WHEREDUE.md 2>/dev/null | head -20 || echo 'No pending integrations'",
          "timeout": 3,
          "description": "Show pending integrations from WHEREDUE"
        }
      ]
    }
  ],
  "Stop": [
    {
      "matcher": "*",
      "hooks": [
        {
          "type": "command",
          "command": "bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/ralph-stop-hook.sh",
          "timeout": 5,
          "description": "Ralph Wiggum: Block exit if loop active, feed prompt back"
        },
        {
          "type": "command",
          "command": "bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/session-end.sh",
          "timeout": 10,
          "description": "Persist session learnings to scoped remembrance"
        },
        {
          "type": "command",
          "command": "bash ${CLAUDE_PLUGIN_ROOT}/hooks/scripts/evaluate-session.sh",
          "timeout": 15,
          "description": "Meta-improvement: evaluate session, update loop state, check SCRUM"
        },
        {
          "type": "command",
          "command": "bash ${CLAUDE_PLUGIN_ROOT}/scripts/meta-round.sh quick 2>/dev/null || echo 'Meta-round skipped'",
          "timeout": 15,
          "description": "Quick meta-round: update indexes, check alignment"
        },
        {
          "type": "command",
          "command": "bash ${CLAUDE_PLUGIN_ROOT}/observability/truth-tracker.sh snapshot 2>/dev/null || echo 'Snapshot skipped'",
          "timeout": 5,
          "description": "Save observability snapshot"
        }
      ]
    }
  ],
  "PreToolUse": [
    {
      "matcher": "Task",
      "hooks": [
        {
          "type": "command",
          "command": "bash ${CLAUDE_PLUGIN_ROOT}/observability/agent-trace/validate-spawn.sh \"${TOOL_INPUT_subagent_type:-unknown}\" \"${TOOL_INPUT_description:-No description}\"",
          "timeout": 5,
          "description": "Validate agent exists in registry and log spawn intent"
        }
      ]
    }
  ],
  "PostToolUse": [
    {
      "matcher": "Task",
      "hooks": [
        {
          "type": "command",
          "command": "bash ${CLAUDE_PLUGIN_ROOT}/observability/agent-trace/capture-result.sh \"${AGENT_SPAN_ID:-${AGENT_RUN_ID:-unknown}}\" \"success\" \"Agent completed\"",
          "timeout": 5,
          "description": "Capture agent execution result and duration"
        }
      ]
    }
  ]
}
